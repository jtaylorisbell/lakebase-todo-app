# Databricks Asset Bundle configuration for Lakebase Todo App
#
# Deploy with: databricks bundle deploy -t <target>
#
# Targets:
#   - dev: Development environment
#   - prod: Production environment

bundle:
  name: lakebase-todo-app

permissions:
  - user_name: taylor.isbell@databricks.com
    level: CAN_MANAGE
  - service_principal_name: 64cabdb0-1674-4cd1-b24f-6396c9dbaa59
    level: CAN_MANAGE

# Include resource definitions from the resources directory
include:
  - resources/*.yml

# Workspace sync configuration
sync:
  exclude:
    - node_modules/
    - frontend/node_modules/
    - frontend/dist/
    - .venv/
    - __pycache__/
    - "*.egg-info/"
    - .env
    - .env.local
    - uv.lock

# Variables with defaults (can be overridden per target)
variables:
  lakebase_project_id:
    description: Lakebase project ID
    default: todo-app
  lakebase_branch_id:
    description: Lakebase branch ID
    default: main
  lakebase_endpoint_id:
    description: Lakebase endpoint ID
    default: default
  lakebase_database:
    description: Lakebase database name
    default: todoapp

# Target environments
targets:
  dev:
    default: true
    workspace:
      root_path: /Workspace/.bundle/${bundle.name}/dev

  prod:
    workspace:
      root_path: /Workspace/.bundle/${bundle.name}/prod
